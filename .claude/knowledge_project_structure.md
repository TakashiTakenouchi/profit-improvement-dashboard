# Claude Code プロジェクト構成ルール（共通Knowledge）

## 必須プロセス

すべてのプロジェクトで以下のプロセスを**先行して定義**すること。

---

## 1. プロジェクト構成の事前定義

### 1.1 フォルダ構成テンプレート

```
project_root/
├── input/                      # 入力データ
│   ├── raw/                    # 元データ
│   └── processed/              # 前処理済みデータ
├── output/                     # 出力データ
│   ├── data/                   # 処理結果データ
│   ├── reports/                # レポート・分析結果
│   └── models/                 # 学習済みモデル
├── src/                        # ソースコード
│   ├── analysis/               # 分析コード
│   ├── preprocessing/          # 前処理コード
│   └── utils/                  # ユーティリティ
├── notebooks/                  # Jupyter Notebooks（必要に応じて）
├── config/                     # 設定ファイル
├── logs/                       # 実行ログ
├── .claude/                    # Claude Code用ナレッジ
│   └── knowledge_*.md          # プロジェクト固有のナレッジ
└── README.md                   # プロジェクト概要
```

### 1.2 プロジェクト開始時の確認事項

1. **入力ファイル**: パス、形式、データ構造
2. **処理内容**: 分析手法、アルゴリズム
3. **出力ファイル**: パス、形式、命名規則
4. **Pythonコード**: 保存先、ファイル名

---

## 2. Pythonコードの保存ルール

### 2.1 必須ルール

- すべてのPythonコードは**ローカルファイルとして保存**する
- Bash内での直接実行（`python -c` や `python << EOF`）は**禁止**
- コードは`src/`フォルダ配下に配置

### 2.2 ファイル命名規則

```
{番号}_{処理内容}_{日付}.py

例:
01_data_preprocessing_20251227.py
02_logistic_regression_analysis_20251227.py
03_store_improvement_20251227.py
```

### 2.3 コード構成テンプレート

```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
ファイル名: {ファイル名}
作成日: {日付}
目的: {処理の目的}

入力:
    - {入力ファイル1}: {説明}
    - {入力ファイル2}: {説明}

出力:
    - {出力ファイル1}: {説明}
    - {出力ファイル2}: {説明}
"""

import pandas as pd
import numpy as np
# その他のimport

# =============================================================================
# 設定
# =============================================================================
INPUT_DIR = "path/to/input"
OUTPUT_DIR = "path/to/output"

# =============================================================================
# メイン処理
# =============================================================================
def main():
    # 処理内容
    pass

if __name__ == "__main__":
    main()
```

---

## 3. ナレッジの保存ルール

### 3.1 保存先

- プロジェクト固有: `{project_root}/.claude/knowledge_*.md`
- 共通ナレッジ: このファイル

### 3.2 ナレッジファイルの内容

1. **概要**: プロジェクトの目的
2. **データ構造**: 入出力データの定義
3. **処理フロー**: 分析・処理の流れ
4. **結果サマリー**: 主要な分析結果
5. **次のステップ**: 今後の作業予定
6. **注意事項**: 重要な制約・注意点

---

## 4. 実行プロセス

### 4.1 プロジェクト開始時

1. ユーザーから要件をヒアリング
2. フォルダ構成を定義・作成
3. 入出力ファイルを明確化
4. Pythonファイル名を決定

### 4.2 実装時

1. Pythonコードをローカルに保存
2. 保存したファイルを実行
3. 実行結果を確認
4. 必要に応じてコード修正

### 4.3 完了時

1. ナレッジファイルを作成・更新
2. 出力ファイルを確認
3. README.mdを更新（必要に応じて）

---

## 5. チェックリスト

プロジェクト開始時に以下を確認:

- [ ] フォルダ構成を定義したか
- [ ] 入力ファイルのパスと形式を確認したか
- [ ] 出力ファイルのパスと命名規則を決定したか
- [ ] Pythonファイル名と保存先を決定したか
- [ ] ナレッジファイルの保存先を決定したか

---

**最終更新**: 2025年12月27日
